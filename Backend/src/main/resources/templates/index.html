<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">	
		
		<title>AutoBackup Application</title>
		
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" />

		<link rel="stylesheet" href="static/styles.css"/>
		<script src="static/script.js"></script>
		<script src='https://kit.fontawesome.com/a076d05399.js'></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<style> 

		</style>
	</head>
	
	<body>
		<div class="header" id="ScheduleBackup">
			<div class="topnav" id="myTopnav">
			  <a href="#" class="fa fa-home"></a>
			  <a href="#ScheduleBackup">Schedule Backup</a>
			  <a href="#BackupHistory">Backup History</a>
			  <a href="#AboutApplication">About Application</a>
			  <a href="#contact">Contact Me</a>
			  <a class="icon" onclick="openNav()"><i class='fa fa-bars'></i></a>
			</div>
			
			<div id="mySidenav" class="sidenav">
			  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
			  <a href="#ScheduleBackup" onclick="closeNav()">Schedule Backup</a>
			  <a href="#BackupHistory" onclick="closeNav()">Backup History</a>
			  <a href="#AboutApplication" onclick="closeNav()">About Application</a>
			  <a href="#contact" onclick="closeNav()">Contact Me</a>
			</div>

			<div class="container1">
				<div class="container1-card">
					<div class="container1-card-left">
						<p>Schedule Backup</p>
						<i class='fa fa-clock-o' style="font-size:35px"></i>
					</div>
					<div class="container1-card-right">
						<h3>Schedule Backup</h3>
						<p>Using this feature you can schedule backups to store files and later you can keep track of the changes made to these files at any time.</p>
						<a href="showForm"><button class="container1-button">Schedule Backup &raquo;</button></a>
					</div>
				</div>
			</div>
		</div>
	
		<div class="middle">	
			<div class="container2" id="BackupHistory">
				<h1>Backup History</h1>
				<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
				<div id="myTable" style="overflow-x:auto; padding-bottom: 50px; padding-top: 50px;">
					<table>
						<thead>
							<tr>
								<th>ID</th>
								<th>Folder Name</th>
								<th>Time</th>
								<th>Status</th>
								<th>Delete</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="backup : ${backups}">
								<td th:text="${backup.id}"></td>
								<td th:text="${backup.folderName}"></td>
								<td th:text="${backup.time}"></td>
								<td th:text="${backup.status}"></td>
								<td><a th:href="@{/delete/{id}(id=${backup.id})}"><button class="container2-button"><i style='font-size:24px' class='fas'>&#xf410;</i></button></a></td>
							</tr>
						</tbody>
					</table>
				  </div>
			</div>
			
			<div class="container2" id="Graph">
				<h1>Graph</h1>
				<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
				<div id="myChart" style="height: 400px"></div>
			</div>
			
			<div class="container2">
				<h1>Track your backups</h1>
				<p>This feature allows you to see how your newly modified file compares to the one you have already backed up</p>
				
				<form action="/compareForm" method="post" id="comparison" enctype="multipart/form-data">
					<label for="backups">Select a completed backup: </label>
					<select id="selectBackup" name="selectBackup" required="required">
					    <option th:each="doneBackup : ${doneBackupList}" th:value="${doneBackup}" th:text="${doneBackup}">
					    </option>
					</select>
				
					<div>	
						<label class="container2-button">
							<i class="fa fa-file"></i> Select a file to compare<input type="file" name="file" id="folderName" style="display: none;" required="required">
						</label></br>
						<label id="file-name"></label>
					</div>
					
                    <input type="submit" class="container2-button" value="Compare">
				</form>
			</div>

			<div class="container4"  id="AboutApplication">
				<div class="container4-column" style="background-color: #def2f1;">
					<div class="container4-column-content" id="left">
						<i style='font-size:80px' class='fas'>&#xf0a0;</i>
					</div>
				</div>
				<div class="container4-column" style="background-color: #def2f1;">
					<div class="container4-column-content" id="right">
						<h3>About AutoBackup</h3>
						<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
					</div>
				</div>
			</div>

			<div class='container3'>
				<div class='inner-container3'>
					<h1>About AutoBackup</h1>
					<div class='container3-content'>
						<div class='container3-card'>
							<div class='container3-icon'>
								<i class='fa fa-database'></i>
							</div>
							<h3>Feature 1</h3>
							<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
						</div>

						<div class='container3-card'>
							<div class='container3-icon'>
								<i class='fa fa-code'></i>
							</div>
							<h3>Feature 2</h3>
							<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
						</div>

						<div class='container3-card'>
							<div class='container3-icon'>
								<i class='fa fa-bug'></i>
							</div>
							<h3>Feature 3</h3>
							<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="footer" id="contact">	
			<h2>Thanks For Using AutoBackup Application</h2>
			<i style='font-size:50px; padding-bottom: 50px; padding-top: 20px;' class='fas'>&#xf121;</i>
		</div>
		
		<script src="https://code.highcharts.com/highcharts.js"></script>
		<script src="https://code.highcharts.com/highcharts-3d.js"></script>
		<script src="https://code.highcharts.com/modules/exporting.js"></script>	
		
		<script th:inline="javascript">
		
			document.querySelector("#folderName").onchange = function(){
			  document.querySelector("#file-name").textContent = this.files[0].name;
			}
		
			var chartDiv = document.getElementById("myChart");
			if([[${InProgress}]] === null && [[${Done}]] === null || [[${InProgress}]] === 0 && [[${Done}]] === 0) { //or empty or whataver
				chartDiv.style.display = 'none';
			} else {
				chartDiv.style.display = 'block';
			}
			
			var tableDiv = document.getElementById("myTable");
			if([[${backups}]] === null || [[${backups}]].length === 0) { //or empty or whataver
				tableDiv.style.display = 'none';
			} else {
				tableDiv.style.display = 'block';
			}
			
			var comparisonDiv = document.getElementById("comparison");
			if([[${doneBackupList}]] === null || [[${doneBackupList}]].length === 0) { //or empty or whataver
				comparisonDiv.style.display = 'none';
			} else {
				comparisonDiv.style.display = 'block';
			}
			
			Highcharts.chart('myChart', {
				chart : {
					type : 'pie',
					options3d : {
						enabled : true,
						alpha : 50,
						beta : 0
					}
				},
				title : {
					text : 'Result Status'
				},
				tooltip : {
					pointFormat : 'Number of backups: <b>{point.y}</b><br>{series.name}: <b>{point.percentage:.1f}%</b>'
				},
				plotOptions : {
					pie : {
						allowPointSelect : true,
						cursor : 'pointer',
						depth : 35,
						dataLabels : {
							enabled : true,
							format : '{point.name}'
						}
					}
				},
				series : [ {
					type : 'pie',
					name : 'Ratio',
					data: [{ name: 'In Progress', y: [[${InProgress}]] },
	                    { name: 'Done', y: [[${Done}]] }]
				} ]
			});
		</script>
	</body> 
</html>
